<div id="report" style="width: 100%; height: 700px;"></div>

<script type="text/javascript">
require(["jquery","jquery-block","highcharts"], function ($) {
$(document).ready(function() {
	$page = $("#container");
	$page.addClass("ready");
	var chart;
	$(window).on('resize',function(){
		adaptHeight();
	});

	function adaptHeight() {
		$("#report").height($(window).height()-$(".navbar.navbar-fixed-top").height()-20);
	}
	
	adaptHeight();
			
	{{>report_graph}}
	
	setTimeout(createChart, 50);
	
	var $page = $("body");	
	$("#page_menu #settings").on("click",function(evt){		
		evt.preventDefault();		
		$this = $(this);
		var $me = $page;
		$me.block();
		(function (cb) {
			require(['cash/reportsettings'], function (Modal) {
				var modal = new Modal();
				modal.show();
				modal.once('shown', function () { $me.unblock(); })
				modal.once('result', function (type, acc) {
					if (type!='saved') return;										
					modal.hide()
					cb();				
				})
			},cb)
		})(function (err) {
			if (err) appError(err);
			$me.unblock();
		})
		return false;				
	});	
});
})
</script>

