<script type="text/javascript">
require(["jquery","highcharts"], function ($) {
	var chart;
	$(function() {
		$(window).on('resize',function(){
			adaptHeight();
		});

		function adaptHeight() {
			$("#container").height($(window).height()-$(".navbar.navbar-fixed-top").height()-20);
		}
		adaptHeight();

		{{>report_graph}}
	});
})
</script>
<a class="report-settings" href="javascript:void(0);">{{#i18n}}Report settings{{/i18n}}</a>
<div id="container" style="width: 100%; height: 700px;"></div>

<script type="text/javascript">
var data = '{{data}}'.replace(/&quot;/g,'"');
data = JSON.parse(data);
require(["jquery","jquery-block","bootstrap"], function ($) {
$(document).ready(function() {		
	var $page = $("body");	
	$(document).on("click", ".report-settings",function(evt){		
		evt.preventDefault();		
		$this = $(this);
		var $me = $page;		
		(function (cb) {			
			require(['safe','clitpl'], function (safe,tf) {
				tf.render('reportsettings', {data:data}, safe.sure(cb,function(text, ctx) {					
					$("body").append(text);
					$modal = $("#"+ctx.uniq).modal();				
				}))				
			},cb)
		})(function (err) {
			if (err) appError(err);
			$me.unblock();
		})
		return false;		
	});	
});
})
</script>

